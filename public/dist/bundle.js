!function(e){var a={};function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)t.d(n,i,function(a){return e[a]}.bind(null,i));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=9)}([function(e,a,t){"use strict";var n=Object.prototype.hasOwnProperty;function i(e,a){return Array.isArray(e)?function(e,a){for(var t,n="",s="",r=Array.isArray(a),l=0;l<e.length;l++)(t=i(e[l]))&&(r&&a[l]&&(t=o(t)),n=n+s+t,s=" ");return n}(e,a):e&&"object"==typeof e?function(e){var a="",t="";for(var i in e)i&&e[i]&&n.call(e,i)&&(a=a+t+i,t=" ");return a}(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var a="";for(var t in e)n.call(e,t)&&(a=a+t+":"+e[t]+";");return a}return e+""}function r(e,a,t,n){return!1!==a&&null!=a&&(a||"class"!==e&&"style"!==e)?!0===a?" "+(n?e:e+'="'+e+'"'):("function"==typeof a.toJSON&&(a=a.toJSON()),"string"==typeof a||(a=JSON.stringify(a),t||-1===a.indexOf('"'))?(t&&(a=o(a))," "+e+'="'+a+'"'):" "+e+"='"+a.replace(/'/g,"&#39;")+"'"):""}a.merge=function e(a,t){if(1===arguments.length){for(var n=a[0],i=1;i<a.length;i++)n=e(n,a[i]);return n}for(var r in t)if("class"===r){var l=a[r]||[];a[r]=(Array.isArray(l)?l:[l]).concat(t[r]||[])}else if("style"===r){var l=s(a[r]);l=l&&";"!==l[l.length-1]?l+";":l;var o=s(t[r]);o=o&&";"!==o[o.length-1]?o+";":o,a[r]=l+o}else a[r]=t[r];return a},a.classes=i,a.style=s,a.attr=r,a.attrs=function(e,a){var t="";for(var l in e)if(n.call(e,l)){var o=e[l];if("class"===l){o=i(o),t=r(l,o,!1,a)+t;continue}"style"===l&&(o=s(o)),t+=r(l,o,!1,a)}return t};var l=/["&<>]/;function o(e){var a=""+e,t=l.exec(a);if(!t)return e;var n,i,s,r="";for(n=t.index,i=0;n<a.length;n++){switch(a.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}i!==n&&(r+=a.substring(i,n)),i=n+1,r+=s}return i!==n?r+a.substring(i,n):r}a.escape=o,a.rethrow=function e(a,n,i,s){if(!(a instanceof Error))throw a;if(!("undefined"==typeof window&&n||s))throw a.message+=" on line "+i,a;try{s=s||t(8).readFileSync(n,"utf8")}catch(t){e(a,null,i)}var r=3,l=s.split("\n"),o=Math.max(i-r,0),d=Math.min(l.length,i+r);var r=l.slice(o,d).map(function(e,a){var t=a+o+1;return(t==i?"  > ":"    ")+t+"| "+e}).join("\n");a.path=n;a.message=(n||"Pug")+":"+i+"\n"+r+"\n\n"+a.message;throw a}},,function(e,a,t){var n=t(0);e.exports=function(e){var a,t="",i=e||{};return function(e){t+='<section data-section-name="leaderboard"><h1 class="leaderboard__header">Таблица лидеров</h1><br><div class="leaderboard"><div class="leaderboard__wrapper"><table><thead><tr><th></th><th>User</th><th>Score</th><th>Games played</th></tr></thead><tbody></tbody>';for(var i=0;i<e.length;i++)t=t+"<tr><td>"+n.escape(null==(a=e[i].num)?"":a)+"</td><td>"+n.escape(null==(a=e[i].name)?"":a)+"</td><td>"+n.escape(null==(a=e[i].score)?"":a)+"</td><td>"+n.escape(null==(a=e[i].games)?"":a)+"</td></tr>";t+='</table><a class="back" data-href="menu" href="menu">Назад в меню</a></div></div></section>'}.call(this,"data"in i?i.data:"undefined"!=typeof data?data:void 0),t}},function(e,a,t){t(0);e.exports=function(e){var a="",t=e||{};return function(e){a+='<header class="menu-header" id="header"><h1>Logic game</h1><nav>',null===e.login?a+='<a class="menu-button" href="sign_in" data-href="sign_in">Sign In</a><a class="menu-button" href="sign_up" data-href="sign_up">Sign Up</a>':a+='<a class="menu-button" href="profile" data-href="profile">Profile</a>',a+='</nav></header><section data-section-name="menu"><div class="menu-wrapper" id="main"><div class="menu-wrapper__menu" id="menu"><a class="menu__link" href="sign_in" data-href="sign_in">Играть вдвоем</a><br><a class="menu__link" href="sign_up" data-href="sign_up">Играть одному</a><br><a class="menu__link" href="leaders" data-href="leaders">Таблица лидеров</a><br><a class="menu__link" href="about" data-href="about">О нас</a><br></div></div></section>'}.call(this,"data"in t?t.data:"undefined"!=typeof data?data:void 0),a}},function(e,a,t){t(0);e.exports=function(e){var a="",t=e||{};return function(e){a+='<header class="menu-header" id="header"><h1>Logic game</h1><nav>',null===e.login?a+='<a class="menu-button" href="sign_in" data-href="sign_in">Sign In</a><a class="menu-button" href="sign_up" data-href="sign_up">Sign Up</a>':a+='<a class="menu-button" href="profile" data-href="profile">Profile</a>',a+='</nav></header><section data-section-name="about"><div class="about"><div class="about__wrapper"><div class="team"><div class="team__name"><a class="team__a" href="https://github.com/dlipko">Дмитрий Липко</a></div><div class="team__role">Лучший ментор</div><div class="team__name"><a class="team__a" href="https://github.com/SmartPhoneJava">Артём Доктор</a></div><div class="team__role">Fullstack</div><div class="team__name"><a class="team__a" href="https://github.com/slevinsps">Иван Спасенов</a></div><div class="team__role">Fullstack</div><div class="team__name"><a class="team__a" href="https://github.com/Bigyin1">Сергей Апарин</a></div><div class="team__role">Fullstack</div></div><a class="back" data-href="menu" href="menu">Назад в меню</a></div></div></section>'}.call(this,"data"in t?t.data:"undefined"!=typeof data?data:void 0),a}},function(e,a,t){t(0);e.exports=function(e){var a="",t=e||{};return function(e){a+='<header class="menu-header" id="header"><h1>Logic game</h1><nav>',null===e.login?a+='<a class="menu-button" href="sign_in" data-href="sign_in">Sign In</a><a class="menu-button" href="sign_up" data-href="sign_up">Sign Up</a>':a+='<a class="menu-button" href="profile" data-href="profile">Profile</a>',a+='</nav></header><section class="signup"><form class="signup__form" novalidate="novalidate"><input class="input signup__input text-h2" id="email" type="email" name="email" autocomplete="autocomplete" autofocus="true" placeholder="Email"><div class="warning signup__warning hidden js-warning-email"></div><input class="input signup__input text-h2" id="login" type="login" name="login" autocomplete="autocomplete" autofocus="true" placeholder="Login"><div class="warning signup__warning hidden js-warning-login"></div><input class="input signup__input text-h2" id="password" type="password" name="password" autocomplete="autocomplete" placeholder="Password"><div class="warning signup__warning hidden js-warning-password"></div><input class="input signup__input text-h2" id="password-repeat" type="password" name="password-repeat" autocomplete="autocomplete" placeholder="Repeat Password"><div class="warning signup__warning hidden js-warning-repassword"></div><input class="button signup__submit text-h2" type="submit" name="submit" value="Sign up"><div class="signup__footer"><a class="button header-bar__button text-base" data-href="menu" href="menu">Back to Menu</a><div class="text-base">or</div><a class="button header-bar__button text-base" data-href="sign_in" href="sign_in">Sign In</a></div></form></section>'}.call(this,"data"in t?t.data:"undefined"!=typeof data?data:void 0),a}},function(e,a,t){t(0);e.exports=function(e){var a="",t=e||{};return function(e){a+='<header class="menu-header" id="header"><h1>Logic game</h1><nav>',null===e.login?a+='<a class="menu-button" href="sign_in" data-href="sign_in">Sign In</a><a class="menu-button" href="sign_up" data-href="sign_up">Sign Up</a>':a+='<a class="menu-button" href="profile" data-href="profile">Profile</a>',a+='</nav></header><section class="signup"><form class="signup__form" novalidate="novalidate"><input class="input signup__input text-h2" id="email" type="email" name="email" autofocus="true" placeholder="Email"><div class="warning signup__warning hidden js-warning-email"></div><input class="input signup__input text-h2" id="password" type="password" name="password" autocomplete="autocomplete" placeholder="Password"><div class="warning signup__warning hidden js-warning-password"></div><input class="button signup__submit text-h2" type="submit" name="submit" value="Sign in"><div class="signup__footer"><a class="button header-bar__button text-base" data-href="menu" href="menu">Back to Menu</a><div class="text-base">or</div><a class="button header-bar__button text-base" data-href="sign_up" href="sign_up">Sign Up</a></div></form></section>'}.call(this,"data"in t?t.data:"undefined"!=typeof data?data:void 0),a}},function(e,a,t){var n=t(0);e.exports=function(e){var a,t="",i=e||{};return function(e){t+='<header class="menu-header" id="header"><h1>Logic game</h1><nav>',null===e.login?t+='<a class="menu-button" href="sign_in" data-href="sign_in">Sign In</a><a class="menu-button" href="sign_up" data-href="sign_up">Sign Up</a>':t+='<a class="menu-button" href="profile" data-href="profile">Profile</a>',t+='</nav></header><section data-section-name="profile"><div class="profile"><div class="profile__wrapper"><div class="profile__main"><div class="profile__avatar">';var i=e.avatar;t=t+'<img class="profile__avatar__img"'+n.attr("src",i,!0,!0)+'></div><div class="profile__info"><div class="profile__row"><div class="profile__name">Login</div><div class="profile__value">'+n.escape(null==(a=e.login)?"":a)+'</div></div><div class="profile__row"><div class="profile__name">Email</div><div class="profile__value">'+n.escape(null==(a=e.email)?"":a)+'</div></div><div class="profile__row"><div class="profile__name">Password</div><div class="profile__value">******</div></div><div class="profile__row"><div class="profile__name">Games Played</div><div class="profile__value">'+n.escape(null==(a=e.played)?"":a)+'</div></div></div></div><a class="back" data-href="menu" href="menu">Назад в меню</a></div></div></section>'}.call(this,"data"in i?i.data:"undefined"!=typeof data?data:void 0),t}},function(e,a){},function(e,a,t){"use strict";t.r(a);var n=t(2),i=t.n(n);class s{constructor({el:e=document.body}={}){this._el=e,this.template=i.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data})}}var r=t(3),l=t.n(r);class o{constructor({el:e=document.body}={}){this._el=e,this.template=l.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data})}}var d=t(4),u=t.n(d);class c{constructor({el:e=document.body}={}){this._el=e,this.template=u.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data})}}var h=t(5),p=t.n(h);function _(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(String(e).toLowerCase())}function f(e){return/^[A-Za-z]\w{3,14}$/i.test(e)}const m=new class{constructor(){this.login=null,this.email=null,this.played=null,this.avatar=null,this.guid=null}setUser({email:e,played:a,avatar:t,guid:n,login:i}={}){this.email=e||null,this.played=a||0,this.avatar=t||"./img/qrosh.png",this.guid=n||null,this.login=i||null}removeUser(){this.email=null,this.played=null,this.avatar=null,this.guid=null,this.login=null}};class g{static post({url:e="/",body:a={}}={}){return fetch(e,{method:"POST",body:JSON.stringify(a),credentials:"include"})}static get({url:e="/"}={}){return fetch(e,{method:"GET",credentials:"include"})}}class v{constructor({el:e=document.body}={}){this._el=e,this.template=p.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data}),this._warnings={},this._warnings.email=this._el.querySelector(".js-warning-email"),this._warnings.login=this._el.querySelector(".js-warning-login"),this._warnings.pass=this._el.querySelector(".js-warning-password"),this._warnings.repass=this._el.querySelector(".js-warning-repassword"),this._form=this._el.querySelector(".signup__form"),this._submitButton=this._el.querySelector(".signup__submit"),this._submitButton.addEventListener("click",this._onSubmit.bind(this))}_onSubmit(e){console.log("event"),e.preventDefault();const a={};a.email=this._form.elements.email.value,a.login=this._form.elements.login.value,a.pass=this._form.elements.password.value,a.repass=this._form.elements["password-repeat"].value,this._validateInput(a)&&this._auth(a)}_validateInput({email:e,login:a,pass:t,repass:n}){let i=!0;if(this._hideWarning(this._warnings.email),!0!==_(e)){let a="Invalid email format";0===e.length&&(a="Fill email field please"),this._showWarning(this._warnings.email,a),i=!1}if(this._hideWarning(this._warnings.login),!0!==f(a)){let e="Invalid login format";0===a.length&&(e="Fill login field please"),this._showWarning(this._warnings.login,e),i=!1}if(this._hideWarning(this._warnings.pass),!0!==f(t)){let e="Invalid password format";0===t.length&&(e="Fill password field please"),this._showWarning(this._warnings.pass,e),i=!1}if(this._hideWarning(this._warnings.repass),n!==t){let e="Passwords dont match";0===n.length&&(e="Repeat password please"),this._showWarning(this._warnings.repass,e),i=!1}return i}_showWarning(e,a){e.classList.remove("hidden"),e.innerHTML="",e.innerHTML+=a}_hideWarning(e){e.classList.add("hidden"),e.innerHTML=""}_auth(e){g.post({url:"/signup",body:e}).then(a=>{201===a.status?a.json().then(a=>{m.setUser({...e,guid:a.id}),P(),console.log(m)}):a.json().then(e=>console.log("error: ",e))})}}var b=t(6),w=t.n(b);class y{constructor({el:e=document.body}={}){this._el=e,this.template=w.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data}),this._warnings={},this._warnings.email=this._el.querySelector(".js-warning-email"),this._warnings.pass=this._el.querySelector(".js-warning-password"),this._form=this._el.querySelector(".signup__form"),this._submitButton=this._el.querySelector(".signup__submit"),this._submitButton.addEventListener("click",this._onSubmit.bind(this))}_onSubmit(e){e.preventDefault();const a={};a.email=this._form.elements.email.value,a.pass=this._form.elements.password.value,this._validateInput(a)&&this._login(a)}_validateInput({email:e,login:a,pass:t,repass:n}){let i=!0;if(this._hideWarning(this._warnings.email),!0!==_(e)){let a="Invalid email format";0===e.length&&(a="Fill email field please"),this._showWarning(this._warnings.email,a),i=!1}if(this._hideWarning(this._warnings.pass),!0!==f(t)){let e="Invalid password format";0===t.length&&(e="Fill password field please"),this._showWarning(this._warnings.pass,e),i=!1}return i}_showWarning(e,a){e.classList.remove("hidden"),e.innerHTML="",e.innerHTML+=a}_hideWarning(e){e.classList.add("hidden"),e.innerHTML=""}_login(e){g.post({url:"/login",body:e}).then(a=>{200===a.status?a.json().then(a=>{m.setUser({...e}),P(),console.log(m)}):a.json().then(e=>{this._showWarning(this._warnings.email,e.error)})})}}var S=t(7),L=t.n(S);class x{constructor({el:e=document.body}={}){this._el=e,this.template=L.a}set data(e=[]){this._data=e}render(){this._el.innerHTML=this.template({data:this._data})}}t.d(a,"createProfile",function(){return P});const j=document.getElementById("application");function M(){const e=new o({el:j});e.data=m,e.render()}function P(){const e=new x({el:j});e.data=m,e.render()}const k={menu:M,sign_in:function(){const e=new y({el:j});e.data=m,e.render()},sign_up:function(){const e=new v({el:j});e.data=m,e.render()},leaders:function(){const e=new s({el:j});e.data=JSON.parse(JSON.stringify([{num:"1",name:"ser",score:"120000",games:"99"},{num:"2",name:"cat",score:"23500",games:"99"},{num:"3",name:"damian",score:"1200",games:"99"},{num:"4",name:"dog",score:"120000",games:"99"},{num:"5",name:"pig",score:"15000",games:"99"}])),e.render()},about:function(){const e=new c({el:j});e.data=m,e.render()},profile:P};M(),j.addEventListener("click",function(e){if(!(e.target instanceof HTMLAnchorElement)||e.target.classList.contains("team__a"))return;e.preventDefault();const a=e.target;console.log({href:a.href,dataHref:a.dataset.href}),j.innerHTML="",k[a.dataset.href]()})}]);